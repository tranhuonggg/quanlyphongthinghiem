<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SmartLab - Lịch Sử Dụng Phòng </title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="./admin.css">
  <link rel="icon" href="./img/logo_web.png" type="image/png">
</head>

<body>
  <div class="container-fluid">
    <div class="row">

      <!-- Sidebar -->
      <div class="sidebar col-md-2">
        <div>
          <div class="infor">
            <img src="./img/logo_admin.jpg" alt="Admin">
            <p class="name">Admin 1</p>
          </div>
          <div class="nav-links">
            <a href="./TrangChu.html"><i class="fas fa-house me-2"></i> Trang chủ</a>
            <a href="./QL_Admin.html"><i class="fas fa-user-shield me-2"></i> Quản lý Admin</a>
            <a href="./QL_NhanVien.html"><i class="fas fa-user-cog me-2"></i> Quản lý Nhân Viên</a>
            <a href="./QL_NguoiDung.html"><i class="fas fa-user-group me-2"></i> Quản lý Người dùng</a>
            <a href="./QL_ThietBi.html"><i class="fas fa-tools me-2"></i> Quản lý Thiết bị/Vật tư</a>
            <a href="./QL_Phong.html"><i class="fas fa-building me-2"></i> Quản lý Phòng</a>
            <a href="./LichSuDungPhong.html" class="active"><i class="fas fa-calendar-alt me-2"></i> Lịch sử dụng
              phòng</a>
            <a href="./BaoCaoThiNghiem.html"><i class="fas fa-flask me-2"></i> Báo cáo thí nghiệm</a>
            <a href="./QL_DoanhThu.html"><i class="fas fa-coins me-2"></i> Quản lý Doanh thu</a>
            <a href="./BaoCaoThongKe.html"><i class="fas fa-chart-bar me-2"></i> Báo cáo thống kê</a>
          </div>
        </div>
        <div class="logout-link">
          <a href="#" onclick="dangXuat()"><i class="fas fa-sign-out-alt me-2"></i> Đăng xuất</a>
        </div>
      </div>

      <!-- Main content -->
      <div class="col-md-10 content">
        <div class="d-flex m-auto" style="border-bottom: 1px solid #ccc;">
          <img src="./img/logo_dark.png" alt="SmartLab" style="height: 60px; margin: auto;">
        </div>

        <div class="d-flex justify-content-between align-items-center my-1 ">
          <h4 class="text-muted">Lịch sử dụng phòng </h4>
          <a href="#" class="btn btn-primary">
            <i class="fas fa-plus"></i> Thêm mới
          </a>
        </div>

        <!-- Bảng lịch sử sử dụng phòng -->
        <table id="usageTable" class="table table-striped table-bordered table-hover">
          <thead>
            <tr>
              <th>Phòng</th>
              <th>Người sử dụng</th>
              <th>Số điện thoại</th>
              <th>Ngày sử dụng</th>
              <th>Trạng Thái</th>
              <th>Chức Năng</th>
            </tr>
          </thead>
          <tbody>
            <!-- Dữ liệu mẫu -->
            <tr>
              <td>Microscope Room 1</td>
              <td>Nguyễn Văn A</td>
              <td>09786745456</td>
              <td>2025-03-20</td>
              <td>Đã trả phòng </td>
              <td>
                <button class="btn btn-warning btn-sm">Sửa</button>
                <button class="btn btn-info btn-sm">Chi tiết</button>
                <button class="btn btn-danger btn-sm">Xóa</button>
              </td>
            </tr>
            <tr>
              <td>Spectroscopy Room</td>
              <td>Trần Thị B</td>
              <td>07456645656</td>
              <td>2025-03-19</td>
              <td>Đang sử dụng</td>
              <td>
                <button class="btn btn-warning btn-sm">Sửa</button>
                <button class="btn btn-info btn-sm">Chi tiết</button>
                <button class="btn btn-danger btn-sm">Xóa</button>
              </td>
            </tr>
            <tr>
              <td>X-ray Lab</td>
              <td>Trần Thị B</td>
              <td>07456645656</td>
              <td>2025-03-19</td>
              <td>Đang sử dụng</td>
              <td>
                <button class="btn btn-warning btn-sm">Sửa</button>
                <button class="btn btn-info btn-sm">Chi tiết</button>
                <button class="btn btn-danger btn-sm">Xóa</button>
              </td>

              <!-- Thêm dòng khác tại đây -->
          </tbody>
        </table>

      </div>


    </div>
  </div>

  <script>
    function dangXuat() {
      if (confirm("Bạn có chắc chắn muốn đăng xuất?")) {
        localStorage.clear();
        sessionStorage.clear();
        window.location.href = "Login.html";
      }
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- JQuery và DataTables -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.5/js/dataTables.bootstrap5.min.js"></script>

  <!-- DataTables Buttons -->
  <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.bootstrap5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>

  <!-- Khởi tạo DataTable -->
  <script>
    $(document).ready(function () {
      var table = $('#usageTable').DataTable({
        dom: "<'row'<'col-sm-2'l><'col-sm-4'f><'col-sm-6 text-right'B>>" +
          "<'row'<'col-sm-12'tr>>" +
          "<'row'<'col-sm-5'i><'col-sm-7'p>>",
        buttons: [
          {
            extend: 'excelHtml5',
            text: '<i class="fas fa-file-excel"></i> Xuất Excel',
            className: 'btn btn-success btn-sm'
          },
          {
            extend: 'csvHtml5',
            text: '<i class="fas fa-file-csv"></i> Xuất CSV',
            className: 'btn btn-info btn-sm'
          },
          {
            extend: 'pdfHtml5',
            text: '<i class="fas fa-file-pdf"></i> Xuất PDF',
            className: 'btn btn-danger btn-sm'
          },
          {
            extend: 'print',
            text: '<i class="fas fa-print"></i> In bảng',
            className: 'btn btn-secondary btn-sm'
          }
        ]
      });

      // Thêm nút Báo cáo nếu trạng thái là "Đã trả phòng"
      $('#usageTable tbody tr').each(function () {
        var status = $(this).find('td:eq(4)').text().trim(); // Cột trạng thái
        var actionTd = $(this).find('td:eq(5)'); // Cột chức năng

        if (status === "Đã trả phòng") {
          // Tạo nút báo cáo
          var reportBtn = $('<button class="btn btn-success btn-sm m-1">Báo cáo</button>');

          // Gắn sự kiện click để chuyển trang
          reportBtn.on('click', function () {
            // Chuyển trang sang trang báo cáo chi tiết (thay tên trang nếu cần)
            window.location.href = "NhapBaoCao.html";
          });

          // Thêm nút vào cột chức năng
          actionTd.append(reportBtn);
        }

      });
    });
  </script>



</body>

</html>